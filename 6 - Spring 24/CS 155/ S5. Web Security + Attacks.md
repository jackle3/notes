---
Week: Week 5
---
# Overview

![[attachments/Untitled 82.png|Untitled 82.png]]

![[attachments/Untitled 1 49.png|Untitled 1 49.png]]

# Session Cookies

- HTTP is a stateless protocol.
- Cookies allow the server to know who its interacting with when using HTTP.

![[attachments/Untitled 2 49.png|Untitled 2 49.png]]

- This might be bad because the cookie can be hijacked.
    - Attacker can modify the cookie before sending it back.

![[attachments/Untitled 3 49.png|Untitled 3 49.png]]

## Cookie SOP

![[attachments/Untitled 4 48.png|Untitled 4 48.png]]

## DOM SOP

![[attachments/Untitled 5 48.png|Untitled 5 48.png]]

## DOM vs Cookie SOP

- The two sites have different Cookie origins, but same DOM origins.
    - This allows one site to read the DOM of the other.
    - The DOM SOP overrides the Cookie SOP

![[attachments/Untitled 6 47.png|Untitled 6 47.png]]

# CORS

- This is a safe way to access information from other websites â†’ make sure the application has permission before sending the actual request.

![[attachments/Untitled 7 47.png|Untitled 7 47.png]]

# Cross Site Scripting (XSS)

![[attachments/Untitled 8 47.png|Untitled 8 47.png]]

## Reflected XSS

- In this case, the user trusts the website.
    - They click on a link to the website (but the URL has some script tags)
    - If the website does not properly sanitize the URL, the script tags get injected and executed.

![[attachments/Untitled 9 46.png|Untitled 9 46.png]]

## Stored XSS

- This would be like the attacker putting a script into their profile.
    - When the user clicks on their profile, they are infected.

![[attachments/Untitled 10 45.png|Untitled 10 45.png]]

## XSS Defenses - CSP

![[attachments/Untitled 11 45.png|Untitled 11 45.png]]

- CSP basically says: only load these sources, assets, and scripts based on rules that we define ourselves.
    - Recall in the reflected XSS example, the src in the script was different from the site.
    - With CSP, we can make it so scripts are not loaded from any site except my own.

![[attachments/Untitled 12 45.png|Untitled 12 45.png]]

# Cross Site Request Forgery (CSRF)

![[attachments/Untitled 13 43.png|Untitled 13 43.png]]

![[attachments/Untitled 14 41.png|Untitled 14 41.png]]

- Supose the bank purely uses the cookie for validation on a form.
    - Suppose User A logs in to `bank` and has their cookie validated.
    - Then Attacker sends a link that, when User A clicks it, sends a request to transfer from `bank`.
    - `bank` thinks that User A made that request, so it makes the fund transfer, without User A knowing.

## Defenses

![[attachments/Untitled 15 39.png|Untitled 15 39.png]]

# SQL Injection

- Occurs when we use unsanitized user input for SQL commands.

![[attachments/Untitled 16 38.png|Untitled 16 38.png]]

![[attachments/Untitled 17 35.png|Untitled 17 35.png]]

---

# Web Security

- **Web security is very hard.**

![[attachments/Untitled 18 33.png|Untitled 18 33.png]]

# Importance of Design Decisions

![[attachments/Untitled 19 30.png|Untitled 19 30.png]]

## Robustness Principle

![[attachments/Untitled 20 30.png|Untitled 20 30.png]]

## HTML Quirks

![[attachments/Untitled 21 27.png|Untitled 21 27.png]]

## Backwards Compatible

![[attachments/Untitled 22 23.png|Untitled 22 23.png]]

# Resources

- [https://www.restapitutorial.com/lessons/httpmethods.html](https://www.restapitutorial.com/lessons/httpmethods.html)
- [https://www.freecodecamp.org/news/http-request-methods-explained/](https://www.freecodecamp.org/news/http-request-methods-explained/)
- [https://portswigger.net/web-security/sql-injection/cheat-sheet](https://portswigger.net/web-security/sql-injection/cheat-sheet)
- [https://portswigger.net/web-security/cross-site-scripting/cheat-sheet](https://portswigger.net/web-security/cross-site-scripting/cheat-sheet)
- [https://portswigger.net/web-security/csrf](https://portswigger.net/web-security/csrf)
- [https://portswigger.net/burp/communitydownload](https://portswigger.net/burp/communitydownload)